"use strict";(self.webpackChunkcelestia_docs=self.webpackChunkcelestia_docs||[]).push([[5605],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),u=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(a),m=r,g=c["".concat(o,".").concat(m)]||c[m]||d[m]||i;return a?n.createElement(g,l(l({ref:t},p),{},{components:a})):n.createElement(g,l({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var u=2;u<i;u++)l[u]=a[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5373:function(e,t,a){a.r(t),a.d(t,{assets:function(){return o},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return u}});var n=a(3117),r=(a(7294),a(3905));const i={sidebar_label:"Node Validateur"},l="Configurer un Node validateur",s={unversionedId:"nodes/validator-node",id:"nodes/validator-node",title:"Configurer un Node validateur",description:"Les nodes Validateurs vous permettent de participer au consensus sur le r\xe9seau de Celestia.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/nodes/validator-node.md",sourceDirName:"nodes",slug:"/nodes/validator-node",permalink:"/fr/nodes/validator-node",draft:!1,editUrl:"https://github.com/celestiaorg/docs/tree/main/docs/nodes/validator-node.md",tags:[],version:"current",frontMatter:{sidebar_label:"Node Validateur"},sidebar:"nodes",previous:{title:"Consensus",permalink:"/fr/category/consensus"},next:{title:"Full Node de consensus",permalink:"/fr/nodes/consensus-full-node"}},o={},u=[{value:"Hardware Requis",id:"hardware-requis",level:2},{value:"Configuration de votre Node validateur",id:"configuration-de-votre-node-validateur",level:2},{value:"Configurer les d\xe9pendances",id:"configurer-les-d\xe9pendances",level:3},{value:"D\xe9ployer Celestia-App",id:"d\xe9ployer-celestia-app",level:2},{value:"Installer celestia-app",id:"installer-celestia-app",level:3},{value:"Configurer les r\xe9seaux pair-\xe0-pair",id:"configurer-les-r\xe9seaux-pair-\xe0-pair",level:3},{value:"Configurer pruning",id:"configurer-pruning",level:3},{value:"Configurer le Node Validateur",id:"configurer-le-node-validateur",level:3},{value:"R\xe9initialiser le r\xe9seau",id:"r\xe9initialiser-le-r\xe9seau",level:3},{value:"Optionnel : synchronisation rapide avec snapshot",id:"optionnel--synchronisation-rapide-avec-snapshot",level:3},{value:"D\xe9marrer Celestia-App avec SystemD",id:"d\xe9marrer-celestia-app-avec-systemd",level:3},{value:"Wallet",id:"wallet",level:3},{value:"D\xe9l\xe9guer de la Stake (mise) \xe0 un validateur",id:"d\xe9l\xe9guer-de-la-stake-mise-\xe0-un-validateur",level:3},{value:"Deployer le Node Celestia",id:"deployer-le-node-celestia",level:2},{value:"Installer Celestia Node",id:"installer-celestia-node",level:3},{value:"Initialiser le Bridge node",id:"initialiser-le-bridge-node",level:3},{value:"Ex\xe9cuter le Bridge node",id:"ex\xe9cuter-le-bridge-node",level:3},{value:"Facultatif : D\xe9marrez le Bridge Node avec SystemD",id:"facultatif--d\xe9marrez-le-bridge-node-avec-systemd",level:3},{value:"Ex\xe9cuter un Node Validateur",id:"ex\xe9cuter-un-node-validateur",level:2}],p={toc:u};function d(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"configurer-un-node-validateur"},"Configurer un Node validateur"),(0,r.kt)("p",null,"Les nodes Validateurs vous permettent de participer au consensus sur le r\xe9seau de Celestia."),(0,r.kt)("h2",{id:"hardware-requis"},"Hardware Requis"),(0,r.kt)("p",null,"Les exigences mat\xe9rielles minimales suivantes sont recommand\xe9es pour ex\xe9cuter le node validateur : :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M\xe9moire : 8 Go de RAM"),(0,r.kt)("li",{parentName:"ul"},"CPU : Quad-Core"),(0,r.kt)("li",{parentName:"ul"},"Disque : 250 Go de stockage SSD"),(0,r.kt)("li",{parentName:"ul"},"Bande passante : 1 Gbps pour le t\xe9l\xe9chargement/100 Mbps pour l'upload")),(0,r.kt)("h2",{id:"configuration-de-votre-node-validateur"},"Configuration de votre Node validateur"),(0,r.kt)("p",null,"Le tutoriel suivant est fait sur une machine d'instance Linux Ubuntu 20.04 (LTS) x64."),(0,r.kt)("h3",{id:"configurer-les-d\xe9pendances"},"Configurer les d\xe9pendances"),(0,r.kt)("p",null,"Follow the instructions on installing the dependencies ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/environment"},"here"),"."),(0,r.kt)("h2",{id:"d\xe9ployer-celestia-app"},"D\xe9ployer Celestia-App"),(0,r.kt)("p",null,"Cette section d\xe9crit la premi\xe8re partie de l'installation d'un Node Validateur Celestia: ex\xe9cutant un daemon Celestia App avec un node Celestia Core interne."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remarque : Assurez-vous de disposer d'au moins 100 Go d'espace de libre pour installer et ex\xe9cuter en toute s\xe9curit\xe9 le node validateur .")),(0,r.kt)("h3",{id:"installer-celestia-app"},"Installer celestia-app"),(0,r.kt)("p",null,"Follow the tutorial on installing Celestia App ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/celestia-app"},"here"),"."),(0,r.kt)("h3",{id:"configurer-les-r\xe9seaux-pair-\xe0-pair"},"Configurer les r\xe9seaux pair-\xe0-pair"),(0,r.kt)("p",null,"Now we will setup the P2P Networks by cloning the networks repository:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd $HOME\nrm -rf networks\ngit clone https://github.com/celestiaorg/networks.git\n")),(0,r.kt)("p",null,'To initialize the network pick a "node-name" that describes your node. The --chain-id parameter we are using here is ',(0,r.kt)("inlineCode",{parentName:"p"},"mamaki"),". Keep in mind that this might change if a new testnet is deployed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'celestia-appd init "node-name" --chain-id mamaki\n')),(0,r.kt)("p",null,"Copy the ",(0,r.kt)("inlineCode",{parentName:"p"},"genesis.json")," file. For mamaki we are using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cp $HOME/networks/mamaki/genesis.json $HOME/.celestia-app/config\n")),(0,r.kt)("p",null,"Set seeds and peers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'BOOTSTRAP_PEERS=$(curl -sL https://raw.githubusercontent.com/celestiaorg/networks/master/mamaki/bootstrap-peers.txt | tr -d \'\\n\')\necho $BOOTSTRAP_PEERS\nsed -i.bak -e "s/^bootstrap-peers *=.*/bootstrap-peers = \\"$BOOTSTRAP_PEERS\\"/" $HOME/.celestia-app/config/config.toml\n')),(0,r.kt)("p",null,"Note: You can find more peers ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/networks/blob/master/mamaki/peers.txt"},"here"),"."),(0,r.kt)("h3",{id:"configurer-pruning"},"Configurer pruning"),(0,r.kt)("p",null,"Pour une utilisation r\xe9duite de l'espace disque, nous vous recommandons de configurer le pruning \xe0 l'aide de la configurations ci-dessous. Vous pouvez changer cela pour vos propres configurations de pruning, si vous le d\xe9sirez:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'PRUNING="custom"\nPRUNING_KEEP_RECENT="100"\nPRUNING_INTERVAL="10"\n\nsed -i -e "s/^pruning *=.*/pruning = \\"$PRUNING\\"/" $HOME/.celestia-app/config/app.toml\nsed -i -e "s/^pruning-keep-recent *=.*/pruning-keep-recent = \\\n\\"$PRUNING_KEEP_RECENT\\"/" $HOME/.celestia-app/config/app.toml\nsed -i -e "s/^pruning-interval *=.*/pruning-interval = \\\n\\"$PRUNING_INTERVAL\\"/" $HOME/.celestia-app/config/app.toml\n')),(0,r.kt)("h3",{id:"configurer-le-node-validateur"},"Configurer le Node Validateur"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'sed -i.bak -e "s/^mode *=.*/mode = \\"validator\\"/" $HOME/.celestia-app/config/config.toml\n')),(0,r.kt)("h3",{id:"r\xe9initialiser-le-r\xe9seau"},"R\xe9initialiser le r\xe9seau"),(0,r.kt)("p",null,"Cela supprimera tous les dossiers de donn\xe9es afin de pouvoir recommencer \xe0 z\xe9ro :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celestia-appd tendermint unsafe-reset-all --home $HOME/.celestia-app\n")),(0,r.kt)("h3",{id:"optionnel--synchronisation-rapide-avec-snapshot"},"Optionnel : synchronisation rapide avec snapshot"),(0,r.kt)("p",null,"La synchronisation depuis le Genesis peut prendre beaucoup de temps, selon votre mat\xe9riel. Utiliser cette m\xe9thode vous permet de synchroniser votre node Celestia tr\xe8s rapidement en t\xe9l\xe9chargeant un Snapshot r\xe9cent de la blockchain. Si vous souhaitez synchroniser depuis le Genesis, alors vous pouvez ignorer cette partie."),(0,r.kt)("p",null,"Run the following command to quick-sync from a snapshot for ",(0,r.kt)("inlineCode",{parentName:"p"},"mamaki"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'cd $HOME\nrm -rf ~/.celestia-app/data\nmkdir -p ~/.celestia-app/data\nSNAP_NAME=$(curl -s https://snaps.qubelabs.io/celestia/ | \\\n    egrep -o ">mamaki.*tar" | tr -d ">")\nwget -O - https://snaps.qubelabs.io/celestia/${SNAP_NAME} | tar xf - \\\n    -C ~/.celestia-app/data/\n')),(0,r.kt)("h3",{id:"d\xe9marrer-celestia-app-avec-systemd"},"D\xe9marrer Celestia-App avec SystemD"),(0,r.kt)("p",null,"Suivre le tutoriel pour configurer la Celestia App en tant que processus de fond avec SystemD ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/systemd#start-the-celestia-app-with-systemd"},"ici"),"."),(0,r.kt)("h3",{id:"wallet"},"Wallet"),(0,r.kt)("p",null,"Follow the tutorial on creating a wallet ",(0,r.kt)("a",{parentName:"p",href:"/fr/developers/celestia-app-wallet"},"here"),"."),(0,r.kt)("h3",{id:"d\xe9l\xe9guer-de-la-stake-mise-\xe0-un-validateur"},"D\xe9l\xe9guer de la Stake (mise) \xe0 un validateur"),(0,r.kt)("p",null,"Cr\xe9er une variable d'environnement pour l'adresse:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"VALIDATOR_WALLET=<validator-address>\n")),(0,r.kt)("p",null,"Si vous souhaitez d\xe9l\xe9guer plus de stake \xe0 n'importe quel validateur, y compris le v\xf4tre, vous aurez besoin de l'adresse ",(0,r.kt)("inlineCode",{parentName:"p"},"celesvaloper")," du validateur en question. Vous pouvez soit la v\xe9rifier en utilisant l'explorateur de blocs mentionn\xe9 ci-dessus ou vous pouvez ex\xe9cuter la commande ci-dessous pour obtenir le ",(0,r.kt)("inlineCode",{parentName:"p"},"celesvaloper")," de votre wallet de validateur local dans le cas o\xf9 vous souhaitez lui d\xe9l\xe9guer davantage :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celestia-appd keys show $VALIDATOR_WALLET --bech val -a\n")),(0,r.kt)("p",null,"Apr\xe8s avoir entr\xe9 la passphrase du portefeuille, vous devriez voir une sortie similaire :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"Enter keyring passphrase:\ncelesvaloper1q3v5cugc8cdpud87u4zwy0a74uxkk6u43cv6hd\n")),(0,r.kt)("p",null,"To delegate tokens to the ",(0,r.kt)("inlineCode",{parentName:"p"},"celestiavaloper")," validator, as an example you can run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celestia-appd tx staking delegate \\\n    celestiavaloper1q3v5cugc8cdpud87u4zwy0a74uxkk6u4q4gx4p 1000000utia \\\n    --from=$VALIDATOR_WALLET --chain-id=mamaki\n")),(0,r.kt)("p",null,"If successful, you should see a similar output as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},'code: 0\ncodespace: ""\ndata: ""\ngas_used: "0"\ngas_wanted: "0"\nheight: "0"\ninfo: ""\nlogs: []\nraw_log: \'[]\'\ntimestamp: ""\ntx: null\ntxhash: <tx-hash>\n')),(0,r.kt)("p",null,"You can check if the TX hash went through using the block explorer by inputting the ",(0,r.kt)("inlineCode",{parentName:"p"},"txhash")," ID that was returned."),(0,r.kt)("h2",{id:"deployer-le-node-celestia"},"Deployer le Node Celestia"),(0,r.kt)("p",null,"Cette section d\xe9crit la partie 2 de l'installation d'un node validateur Celestia : ex\xe9cuter le daemon Celestia Bridge Node."),(0,r.kt)("h3",{id:"installer-celestia-node"},"Installer Celestia Node"),(0,r.kt)("p",null,"You can follow the tutorial for installing Celestia Node ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/celestia-node"},"here")),(0,r.kt)("h3",{id:"initialiser-le-bridge-node"},"Initialiser le Bridge node"),(0,r.kt)("p",null,"Ex\xe9cutez ce qui suit :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celestia bridge init --core.ip <ip-address> --core.grpc.port <port>\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"NOTE : Le port ",(0,r.kt)("inlineCode",{parentName:"p"},"--core.grpc.port")," est configur\xe9 par d\xe9faut \xe0 9090, donc si vous n'en sp\xe9cifiez pas un autre dans la ligne de commande, il s'ex\xe9cutera sur celui-l\xe0 par d\xe9faut. Vous pouvez utiliser le drapeau (flag) pour sp\xe9cifier un autre port si vous pr\xe9f\xe9rez.")),(0,r.kt)("p",null,"Si vous avez besoin d'une liste de terminaux RPC pour vous connecter, vous pouvez v\xe9rifier dans la liste ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/mamaki-testnet#rpc-endpoints"},"ici")),(0,r.kt)("h3",{id:"ex\xe9cuter-le-bridge-node"},"Ex\xe9cuter le Bridge node"),(0,r.kt)("p",null,"Ex\xe9cutez ce qui suit :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"celestia bridge start\n")),(0,r.kt)("h3",{id:"facultatif--d\xe9marrez-le-bridge-node-avec-systemd"},"Facultatif : D\xe9marrez le Bridge Node avec SystemD"),(0,r.kt)("p",null,"Suivez le tutoriel sur la configuration du Bridge node en tant que processus de fond avec SystemD ",(0,r.kt)("a",{parentName:"p",href:"/fr/nodes/systemd#celestia-bridge-node"},"ici"),"."),(0,r.kt)("p",null,"Vous avez configur\xe9 avec succ\xe8s un Bridge node qui se synchronise avec le r\xe9seau."),(0,r.kt)("h2",{id:"ex\xe9cuter-un-node-validateur"},"Ex\xe9cuter un Node Validateur"),(0,r.kt)("p",null,"Apr\xe8s avoir termin\xe9 toutes les \xe9tapes n\xe9cessaires, vous \xeates maintenant pr\xeats \xe0 ex\xe9cuter un validateur ! Afin de cr\xe9er votre validateur sur la cha\xeene, suivez les instructions ci-dessous. Gardez \xe0 l'esprit que ces \xe9tapes sont n\xe9cessaires UNIQUEMENT si vous souhaitez participer au consensus."),(0,r.kt)("p",null,"Choisissez un nom de ",(0,r.kt)("inlineCode",{parentName:"p"},"moniker")," de votre choix! C'est le nom du validateur qui s'affichera sur les tableaux de bord publics et les explorateurs. ",(0,r.kt)("inlineCode",{parentName:"p"},"VALIDATOR_WALLET")," doit \xeatre le m\xeame que celui d\xe9fini pr\xe9c\xe9demment. Le param\xe8tre ",(0,r.kt)("inlineCode",{parentName:"p"},"--min-self-delegation=1000000")," d\xe9finit la quantit\xe9 de tokens qui sont auto-d\xe9l\xe9gu\xe9s depuis votre wallet de validateur."),(0,r.kt)("p",null,"Maintenant, connectez-vous au r\xe9seau de votre choix."),(0,r.kt)("p",null,"Vous avez l'option suivante de vous connecter \xe0 la liste des r\xe9seaux montr\xe9e ci-dessous:"),(0,r.kt)("p",null,"Continuing the Validator tutorial, here are the steps to connect your validator to Mamaki:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'MONIKER="your_moniker"\nVALIDATOR_WALLET="validator"\n\ncelestia-appd tx staking create-validator \\\n    --amount=1000000utia \\\n    --pubkey=$(celestia-appd tendermint show-validator) \\\n    --moniker=$MONIKER \\\n    --chain-id=mamaki \\\n    --commission-rate=0.1 \\\n    --commission-max-rate=0.2 \\\n    --commission-max-change-rate=0.01 \\\n    --min-self-delegation=1000000 \\\n    --from=$VALIDATOR_WALLET \\\n    --keyring-backend=test\n')),(0,r.kt)("p",null,"You will be prompted to confirm the transaction:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"confirm transaction before signing and broadcasting [y/N]: y\n")),(0,r.kt)("p",null,"Inputting ",(0,r.kt)("inlineCode",{parentName:"p"},"y")," should provide an output similar to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},'code: 0\ncodespace: ""\ndata: ""\ngas_used: "0"\ngas_wanted: "0"\nheight: "0"\ninfo: ""\nlogs: []\nraw_log: \'[]\'\ntimestamp: ""\ntx: null\ntxhash: <tx-hash>\n')),(0,r.kt)("p",null,"You should now be able to see your validator from a block explorer like ",(0,r.kt)("a",{parentName:"p",href:"https://celestia.explorers.guru/"},"here")))}d.isMDXComponent=!0}}]);